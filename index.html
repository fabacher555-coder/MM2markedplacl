<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MM2 Market ‚Äî Login System</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1114; --panel:#121418; --muted:#9aa6b6;
      --accent:#7c5cff; --accent2:#8a34b3; --neon:#02d07b;
      --card-bg:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,system-ui,Arial;
      color:#e6eef8;background:linear-gradient(180deg,#0b0e11,#0a0d11 40%);
    }
    .app{display:flex;height:100vh;overflow:hidden}
    .sidebar{
      width:260px;background:#0b0d10;
      border-right:1px solid rgba(255,255,255,0.02);
      padding:28px 18px;display:flex;flex-direction:column;gap:18px
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:44px;height:44px;border-radius:6px;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      display:flex;align-items:center;justify-content:center;
      font-weight:800;color:#071028
    }
    .brand .title{font-weight:700}
    .nav{margin-top:12px;display:flex;flex-direction:column;gap:6px}
    .nav button{
      background:transparent;color:#cbd6e6;padding:12px 14px;
      border-radius:8px;text-align:left;border:1px solid transparent;
      cursor:pointer;display:flex;gap:12px;align-items:center
    }
    .nav button.active{
      border:1px solid rgba(124,92,255,0.16);
      box-shadow:0 8px 24px rgba(10,8,20,0.6);color:#fff
    }
    .main{flex:1;padding:34px;overflow:auto;position:relative}
    .page-title{font-size:34px;margin:0 0 16px}
    .content-card{
      background:var(--panel);border-radius:12px;padding:18px;
      border:1px solid rgba(255,255,255,0.02);
      box-shadow:0 4px 18px rgba(2,6,20,0.4)
    }
    .topbar{
      position:absolute;top:20px;right:30px;
      display:flex;align-items:center;gap:16px;
    }
    .profile-btn{
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      border:none;border-radius:8px;padding:10px 14px;
      color:white;font-weight:600;cursor:pointer;
    }
    .popup{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.7);display:flex;justify-content:center;
      align-items:center;z-index:1000;display:none;
    }
    .popup-content{
      background:#14171c;border-radius:12px;padding:28px;width:320px;
      display:flex;flex-direction:column;gap:10px;
      border:1px solid rgba(255,255,255,0.05);
    }
    .popup-content input{
      padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);
      background:#0d0f12;color:#fff
    }
    .popup-content button{
      padding:10px;border-radius:8px;border:0;
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      color:#fff;font-weight:600;cursor:pointer;
    }
    .switchlink{
      text-align:center;font-size:13px;color:var(--muted);cursor:pointer;
    }
  </style>
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">MM2</div>
      <div><div class="title">MM2 Market</div><div style="font-size:12px;color:var(--muted)">Trading Hub</div></div>
    </div>
    <nav class="nav">
      <button data-page="shop" class="active">üè† Shop</button>
      <button data-page="wallet">üí≥ Wallet</button>
      <button data-page="inventori">üéí Inventori</button>
    </nav>
  </aside>

  <main class="main">
    <div class="topbar">
      <div id="userInfo">Nicht angemeldet</div>
      <button class="profile-btn" id="profileBtn">üë§ Profil</button>
    </div>

    <section id="page-shop" class="page">
      <h1 class="page-title">Shop</h1>
      <div class="content-card">
        Willkommen im MM2 Market!
      </div>
    </section>

    <section id="page-wallet" class="page" style="display:none">
      <h1 class="page-title">Wallet</h1>
      <div class="content-card">Hier kannst du dein Guthaben verwalten.</div>
    </section>

    <section id="page-inventori" class="page" style="display:none">
      <h1 class="page-title">Inventar</h1>
      <div class="content-card">Deine Items erscheinen hier.</div>
    </section>
  </main>
</div>

<!-- Login/Register Popup -->
<div id="popup" class="popup">
  <div class="popup-content" id="loginForm">
    <h2>Anmelden</h2>
    <input type="email" id="loginEmail" placeholder="E-Mail" />
    <input type="password" id="loginPass" placeholder="Passwort" />
    <button onclick="login()">Login</button>
    <div class="switchlink" onclick="switchForm('register')">Kein Konto? Registrieren</div>
  </div>

  <div class="popup-content" id="registerForm" style="display:none">
    <h2>Registrieren</h2>
    <input type="email" id="regEmail" placeholder="E-Mail" />
    <input type="password" id="regPass" placeholder="Passwort" />
    <button onclick="register()">Registrieren</button>
    <div class="switchlink" onclick="switchForm('login')">Schon ein Konto? Anmelden</div>
  </div>
</div>

<script>
const STORAGE = {USER:'user'};
let currentUser = JSON.parse(localStorage.getItem(STORAGE.USER)) || null;

function updateUserInfo(){
  const info=document.getElementById('userInfo');
  if(currentUser){
    info.textContent = currentUser.email;
  }else{
    info.textContent = 'Nicht angemeldet';
  }
}

function openPopup(){
  document.getElementById('popup').style.display='flex';
  switchForm(currentUser ? 'login' : 'login');
}
function closePopup(){
  document.getElementById('popup').style.display='none';
}

document.getElementById('profileBtn').addEventListener('click', ()=>{
  if(currentUser){
    if(confirm("M√∂chtest du dich abmelden?")){logout();}
  }else{
    openPopup();
  }
});

function switchForm(form){
  document.getElementById('loginForm').style.display = (form==='login')?'flex':'none';
  document.getElementById('registerForm').style.display = (form==='register')?'flex':'none';
}

function register(){
  const email=document.getElementById('regEmail').value.trim();
  const pass=document.getElementById('regPass').value.trim();
  if(!email||!pass){alert('Bitte alle Felder ausf√ºllen.');return;}
  const user={email,password:pass};
  localStorage.setItem('user_'+email, JSON.stringify(user));
  alert('Registrierung erfolgreich! Bitte anmelden.');
  switchForm('login');
}

function login(){
  const email=document.getElementById('loginEmail').value.trim();
  const pass=document.getElementById('loginPass').value.trim();
  const stored=localStorage.getItem('user_'+email);
  if(!stored){alert('Benutzer nicht gefunden.');return;}
  const user=JSON.parse(stored);
  if(user.password!==pass){alert('Falsches Passwort.');return;}
  currentUser=user;
  localStorage.setItem(STORAGE.USER, JSON.stringify(user));
  closePopup();updateUserInfo();alert('Erfolgreich angemeldet!');
}

function logout(){
  localStorage.removeItem(STORAGE.USER);
  currentUser=null;
  updateUserInfo();
  alert('Abgemeldet.');
}

updateUserInfo();

document.getElementById('popup').addEventListener('click', e=>{
  if(e.target.id==='popup'){closePopup();}
});

document.querySelectorAll('.nav button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.page').forEach(p=>p.style.display='none');
    document.getElementById('page-'+btn.dataset.page).style.display='block';
    document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
  });
});
</script>
</body>
</html>
