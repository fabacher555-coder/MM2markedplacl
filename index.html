<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MM2 Marketplace</title>
    <script src="https://www.paypal.com/sdk/js?client-id=AZLjLoylhP8trchxDw9BolwD2rlIzZVbYyBCbAvgtZ8r2ndbmc49l4RXlBChcNJ9Prx2Jf5_RnsdnEz_&currency=EUR"></script>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #1e1e2f; color: #fff; margin: 0; }
        header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background-color: #2b2b3c; }
        header h1 { margin: 0; }
        nav button { margin-left: 1rem; padding: 0.5rem 1rem; background-color: #4caf50; border: none; border-radius: 5px; color: white; cursor: pointer; }
        nav button:hover { background-color: #45a049; }
        main { padding: 2rem; }
        .item { background-color: #33334d; padding: 1rem; margin: 1rem 0; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
        .sort { margin-bottom: 1rem; }
        #paypal-button-container { margin-top: 1rem; }
    </style>
</head>
<body>
    <header>
        <h1>MM2 Marketplace</h1>
        <nav>
            <button onclick="showInventory()">Inventar</button>
            <button onclick="showMarket()">Market</button>
        </nav>
    </header>

    <main id="main-content">
        <h2>Willkommen zum MM2 Marketplace</h2>
        <p>Wähle Inventar oder Market, um loszulegen.</p>
    </main>

    <script>
        // Dummy Items
        const inventory = [
            { name: 'Item A', price: 5 },
            { name: 'Item B', price: 10 }
        ];

        const marketItems = [
            { name: 'Item C', price: 7 },
            { name: 'Item D', price: 3 },
            { name: 'Item E', price: 12 }
        ];

        function showInventory() {
            const main = document.getElementById('main-content');
            main.innerHTML = '<h2>Dein Inventar</h2>';
            inventory.forEach(item => {
                const div = document.createElement('div');
                div.classList.add('item');
                div.innerHTML = `<span>${item.name} - €${item.price}</span>`;
                main.appendChild(div);
            });
        }

        function showMarket() {
            const main = document.getElementById('main-content');
            main.innerHTML = '<h2>Market</h2><div class="sort">Sortiere nach: <button onclick="sortMarket('asc')">Preis aufsteigend</button> <button onclick="sortMarket('desc')">Preis absteigend</button></div><div id="market-list"></div>';
            renderMarketItems(marketItems);
        }

        function renderMarketItems(items) {
            const list = document.getElementById('market-list');
            list.innerHTML = '';
            items.forEach(item => {
                const div = document.createElement('div');
                div.classList.add('item');
                div.innerHTML = `<span>${item.name} - €${item.price}</span><div id='paypal-button-container'></div>`;
                list.appendChild(div);

                paypal.Buttons({
                    createOrder: function(data, actions) {
                        return actions.order.create({
                            purchase_units: [{
                                amount: { value: item.price.toString() }
                            }]
                        });
                    },
                    onApprove: function(data, actions) {
                        return actions.order.capture().then(function(details) {
                            alert('Zahlung abgeschlossen für ' + item.name);
                        });
                    }
                }).render(div.querySelector('#paypal-button-container'));
            });
        }

        function sortMarket(order) {
            const sorted = [...marketItems].sort((a, b) => order === 'asc' ? a.price - b.price : b.price - a.price);
            renderMarketItems(sorted);
        }
    </script>
</body>
</html>
