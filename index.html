<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MM2 Market ‚Äî Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0f1114; --panel:#121418; --muted:#9aa6b6;
    --accent:#7c5cff; --accent2:#8a34b3; --neon:#02d07b;
  }
  body{margin:0;font-family:Inter,system-ui,Arial;color:#e6eef8;background:linear-gradient(180deg,#0b0e11,#0a0d11 40%);}
  .app{display:flex;height:100vh;overflow:hidden}
  /* sidebar */
  .sidebar{width:240px;background:#0b0d10;padding:24px;display:flex;flex-direction:column;gap:18px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:44px;height:44px;border-radius:6px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#071028}
  .nav{display:flex;flex-direction:column;gap:6px;margin-top:10px}
  .nav button{background:transparent;color:#cbd6e6;padding:10px 14px;border-radius:8px;text-align:left;border:1px solid transparent;cursor:pointer}
  .nav button.active{border:1px solid rgba(124,92,255,0.3);color:#fff}
  /* main */
  .main{flex:1;padding:28px;overflow:auto}
  .page{display:none}
  .page.active{display:block}
  .page-title{font-size:28px;margin:0 0 16px}
  .content-card{background:var(--panel);border-radius:12px;padding:18px;margin-bottom:16px}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
  .card{background:#0c0f12;border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.05)}
  .card img{width:100%;height:140px;object-fit:cover;border-radius:8px;margin-bottom:8px}
  .title{font-weight:700}
  .price{color:var(--neon);font-weight:800;margin:6px 0}
  .btn{padding:8px 12px;border-radius:8px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;cursor:pointer}
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.15);color:var(--muted)}
  .muted{color:var(--muted);font-size:13px}
  /* modal */
  .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;z-index:1000}
  .modal.open{display:flex}
  .modal-card{background:#121418;padding:24px;border-radius:12px;width:340px}
</style>

<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=AVZUBNBHWJsxbc5aUgXhtDruOu2M9KeakqwoRdrN0ZqeJOufKD29Nev23YXTcFdT8wcCBco87I9vmL52&currency=USD"></script>
</head>

<body>
<div class="app">
  <aside class="sidebar">
    <div class="brand"><div class="logo">MM2</div><div><b>MM2 Market</b></div></div>
    <nav class="nav">
      <button data-page="shop" class="active">üè† Shop</button>
      <button data-page="cart">üß∫ Warenkorb</button>
      <button data-page="wallet">üí≥ Wallet</button>
      <button data-page="history">üïò Verlauf</button>
      <button data-page="profile">üë§ Profil</button>
    </nav>
  </aside>

  <main class="main">
    <!-- SHOP -->
    <section id="page-shop" class="page active">
      <h1 class="page-title">Item Shop</h1>
      <div class="grid" id="shopGrid"></div>
    </section>

    <!-- CART -->
    <section id="page-cart" class="page">
      <h1 class="page-title">Warenkorb</h1>
      <div class="content-card" id="cartContent">Leer</div>
    </section>

    <!-- WALLET -->
    <section id="page-wallet" class="page">
      <h1 class="page-title">Wallet</h1>
      <div class="content-card">
        Guthaben: <strong id="walletDisplay">$0.00</strong><br><br>
        <button class="btn" onclick="showTopup()">üí≥ Aufladen</button>
      </div>
    </section>

    <!-- HISTORY -->
    <section id="page-history" class="page">
      <h1 class="page-title">Verlauf</h1>
      <div class="content-card" id="historyContent">Keine Transaktionen</div>
    </section>

    <!-- PROFILE -->
    <section id="page-profile" class="page">
      <h1 class="page-title">Profil</h1>
      <div class="content-card">
        <label>Name<br><input id="profName" style="width:100%;padding:8px;margin-top:4px"></label><br><br>
        <label>Email<br><input id="profEmail" style="width:100%;padding:8px;margin-top:4px"></label><br><br>
        <label>Roblox Username<br><input id="profRoblox" style="width:100%;padding:8px;margin-top:4px"></label><br><br>
        <button class="btn" onclick="saveProfile()">Speichern</button>
      </div>
    </section>
  </main>
</div>

<!-- Modal Guthaben -->
<div id="modalTopup" class="modal">
  <div class="modal-card">
    <h3>Guthaben aufladen</h3>
    <div id="paypal-button-container"></div>
    <div style="margin-top:12px;text-align:right">
      <button class="btn secondary" onclick="closeTopup()">Schlie√üen</button>
    </div>
  </div>
</div>

<script>
let items = [
  {id:1,name:"Sunset Knife",price:150,image:"https://static.wikia.nocookie.net/murder-mystery-2/images/e/e3/SunsetKnife.webp"},
  {id:2,name:"Luger",price:75,image:"https://via.placeholder.com/300x150?text=Luger"},
  {id:3,name:"Chroma Seer",price:300,image:"https://via.placeholder.com/300x150?text=Chroma+Seer"}
];
let cart=[], wallet=0, history=[], profile={name:"",email:"",roblox:""};

function $(id){return document.getElementById(id)}

function renderShop(){
  let g=$("shopGrid"); g.innerHTML="";
  items.forEach(it=>{
    let d=document.createElement("div");d.className="card";
    d.innerHTML=`<img src="${it.image}"><div class="title">${it.name}</div><div class="price">$${it.price.toFixed(2)}</div>
      <button class="btn" onclick="addToCart(${it.id})">üõí In den Warenkorb</button>`;
    g.appendChild(d);
  })
}
function addToCart(id){let it=items.find(x=>x.id==id);if(it){cart.push(it);renderCart();}}
function renderCart(){
  let c=$("cartContent");
  if(cart.length===0){c.textContent="Leer";return;}
  let sum=0;let html="<ul>";
  cart.forEach((x,i)=>{sum+=x.price;html+=`<li>${x.name} - $${x.price} <button onclick="removeFromCart(${i})">x</button></li>`});
  html+=`</ul><b>Summe: $${sum.toFixed(2)}</b><br><button class='btn' onclick='checkout()'>Mit Wallet zahlen</button>`;
  c.innerHTML=html;
}
function removeFromCart(i){cart.splice(i,1);renderCart();}
function checkout(){
  let total=cart.reduce((a,b)=>a+b.price,0);
  if(wallet<total){alert("Nicht genug Guthaben");return;}
  wallet-=total; history.push("Kauf: $"+total.toFixed(2)); cart=[]; renderCart(); updateWallet(); renderHistory();
}
function updateWallet(){$("walletDisplay").textContent="$"+wallet.toFixed(2);}
function showTopup(){$("modalTopup").classList.add("open");renderPayPalButton(10);}
function closeTopup(){$("modalTopup").classList.remove("open");}
function renderPayPalButton(amount){
  document.getElementById('paypal-button-container').innerHTML="";
  paypal.Buttons({
    style:{color:'blue'},
    createOrder:(data,actions)=>actions.order.create({purchase_units:[{amount:{value:amount.toString()}}]}),
    onApprove:(data,actions)=>actions.order.capture().then(details=>{
      wallet+=amount; history.push("Aufladung $"+amount); updateWallet(); renderHistory(); closeTopup(); alert("Zahlung von "+details.payer.name.given_name+" erfolgreich");
    })
  }).render('#paypal-button-container');
}
function renderHistory(){ $("historyContent").innerHTML = history.length? history.map(x=>"<div>"+x+"</div>").join("") : "Keine Transaktionen"; }
function saveProfile(){profile={name:$("profName").value,email:$("profEmail").value,roblox:$("profRoblox").value};alert("Profil gespeichert");}

// nav switching
document.querySelectorAll(".nav button").forEach(b=>{
  b.addEventListener("click",()=>{
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById("page-"+b.dataset.page).classList.add("active");
    document.querySelectorAll(".nav button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
  })
});

renderShop(); updateWallet(); renderCart(); renderHistory();
</script>
</body>
</html>
